(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{748:function(e,t,a){"use strict";a.r(t);var l=a(32),n=a(8),i=a(14),s=a(15),r=a(17),o=a(16),c=a(18),d=a(0),u=a.n(d),m=a(38),h=a.n(m),p=a(436),b=a(440),v=a(54),g=a(23),f=a(62),y=a(22),E=a(144),N=a(31),C=a(156),k=a(13),T=function(e){function t(){return Object(i.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement("label",null,u.a.createElement(C.CardElement,{style:{base:{fontSize:"18px"}}}))}}]),t}(u.a.Component),O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var l=arguments.length,n=new Array(l),s=0;s<l;s++)n[s]=arguments[s];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(n)))).state={adding:!1,added:!1,disabled:!1},a.handleSubmit=function(e){e.preventDefault(),a.setState({adding:!0}),a.props.stripe.createToken({name:"Jenny Rosen"}).then(function(e){var t=e.token;console.log("Received Stripe token:",t),console.log("user id "+a.props.billingId);var l={billing_profile:a.props.billingId,stripe_id:t.id};h.a.post("http://127.0.0.1:8000/api/payment/",l).then(function(e){console.log(e.data),a.setState({adding:!1,added:!0,disabled:!0})}).catch(function(e){console.log(e.response)})})},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("div",{className:"row pl-5 "},u.a.createElement("div",{className:"col-md-8"},u.a.createElement(T,null)),u.a.createElement("div",{className:"col-md-4 pt-1"},this.state.adding?u.a.createElement(g.a,{btnType:"Btn-primary btn-lg Btn-disable"},"Adding..."):u.a.createElement(g.a,{btnType:this.state.added?"Btn-primary btn-lg Btn-disable":"Btn-primary btn-lg",disabled:this.state.disabled},this.state.added?u.a.createElement(u.a.Fragment,null,u.a.createElement(k.a,{type:"check-circle",theme:"twoTone",twoToneColor:"#52c41a"}),u.a.createElement("span",{className:"text-success"}," Done")):"Add"," "))))}}]),t}(u.a.Component),j=Object(C.injectStripe)(O),S=function(e){function t(){return Object(i.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement(C.Elements,null,u.a.createElement(j,{billingId:this.props.billingId}))}}]),t}(u.a.Component),w=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={controls:{address:{elementType:"input",elementConfig:{type:"text",placeholder:"Enter address "},label:"Address:",hint:"Must contains address",value:"",validation:{required:!0,isUsername:!0},valid:!1,touched:!1},country:{elementType:"select",elementConfig:{options:[{value:"pakistan",displayValue:"Pakistan"},{value:"saudia arab",displayValue:"Saudia Arab"}],placeholder:"Country:"},label:"Country:",value:"pakistan",validation:{},valid:!0},email:{elementType:"input",elementConfig:{type:"email",placeholder:"Enter your email"},label:"Email:",value:"",hint:"Email Must contains @ and valid Domain",validation:{required:!0,isEmail:!0},valid:!1,touched:!1}},controls1:{firstName:{elementType:"input",elementConfig:{type:"text",placeholder:"Enter your first name "},label:"First Name:",hint:"Must contains letters",value:"",validation:{required:!0,isUsername:!0},valid:!1,touched:!1},lastName:{elementType:"input",elementConfig:{type:"text",placeholder:"Enter your last name "},label:"Last Name:",hint:"Must contains letters",value:"",validation:{required:!0,isUsername:!0},valid:!1,touched:!1},city:{elementType:"input",elementConfig:{type:"text",placeholder:"Enter city"},label:"City:",hint:"Must contains City Name",value:"",validation:{required:!0,isUsername:!0},valid:!1,touched:!1},state:{elementType:"input",elementConfig:{type:"text",placeholder:"Enter state"},label:"State:",hint:"Must contains state Name",value:"",validation:{required:!0,isUsername:!0},valid:!1,touched:!1},zipCode:{elementType:"input",elementConfig:{type:"number",placeholder:"123"},label:"ZipCode:",hint:"Must contains ZipCode",value:"",validation:{required:!0,isUsername:!0},valid:!1,touched:!1}},loading:!1,error:null,billingData:null,card:null,editable:!1,cardChange:!1,purchasing:!1,links:[]},a.inputChangedHandler=function(e,t){var i=Object(n.a)({},a.state.controls,Object(l.a)({},t,Object(n.a)({},a.state.controls[t],{value:e.target.value,valid:Object(f.a)(e.target.value,a.state.controls[t].validation),touched:!0})));a.setState({controls:i})},a.inputChangedHandler1=function(e,t){var i=Object(n.a)({},a.state.controls1,Object(l.a)({},t,Object(n.a)({},a.state.controls1[t],{value:e.target.value,valid:Object(f.a)(e.target.value,a.state.controls1[t].validation),touched:!0})));a.setState({controls1:i})},a.onBillingSubmit=function(e){if(e.preventDefault(),a.setState({loading:!0}),a.state.editable){var t={full_name:a.state.controls1.firstName.value+" "+a.state.controls1.lastName.value,address:a.state.controls.address.value,city:a.state.controls1.city.value,country:a.state.controls.country.value,zipcode:a.state.controls1.zipCode.value,user:a.props.userId,email:a.state.controls.email.value};h.a.put("http://127.0.0.1:8000/api/billing/".concat(a.props.userId,"/"),t).then(function(e){a.setState({loading:!1,editable:!1})}).catch(function(e){console.log(e),a.setState({error:e.data})})}else{var l={full_name:a.state.controls1.firstName.value+" "+a.state.controls1.lastName.value,address:a.state.controls.address.value,city:a.state.controls1.city.value,country:a.state.controls.country.value,zipcode:a.state.controls1.zipCode.value,user:a.props.userId,email:a.state.controls.email.value};h.a.post("http://127.0.0.1:8000/api/billing/",l).then(function(e){a.setState({loading:!1,editable:!1,billingData:e.data})}).catch(function(e){console.log(e),a.setState({error:e.data})})}},a.onUpdateBilling=function(e){if("billing"==e){var t=Object(n.a)({},a.state.billingData);a.setState({editable:!0,firstName:t.full_name,lastName:t.full_name,country:t.country,city:t.city,zipCode:t.zipcode})}"card"==e&&a.setState({cardChange:!0})},a.callback=function(e){console.log(e)},a.success=function(e){p.a.success({title:"Payment Verified",content:u.a.createElement("div",null,u.a.createElement("p",null,"Congratulations your payment has been verified"),u.a.createElement("p",null,"Click OK to go into your library"),u.a.createElement("ul",null,e.map(function(e){return u.a.createElement("li",{key:e.id},e.title)}))),onOk:function(){a.props.onCheckToCart(a.props.userId,0),a.props.history.replace("/library")}})},a.orderhandler=function(){a.setState({purchasing:!0});var e={user:a.state.billingData.user,singleProject:0,billingAddress:a.state.billingData.id,orderTotal:a.props.location.state.totalPrice};0==a.props.location.state.cart_id&&(e={user:a.state.billingData.user,singleProject:a.props.location.state.cart[0].id,billingAddress:a.state.billingData.id,orderTotal:a.props.location.state.totalPrice}),h.a.post("http://127.0.0.1:8000/api/order/",e).then(function(e){if("success"===e.data.status){var t=e.data.project;a.success(t)}else a.error()}).catch(function(e){return console.log(e)})},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;h.a.get("http://127.0.0.1:8000/api/billing/".concat(this.props.userId,"/")).then(function(t){e.setState({billingData:t.data}),h.a.get("http://127.0.0.1:8000/api/payment/".concat(e.state.billingData.id)).then(function(t){e.setState({card:t.data}),console.log(t.data)}).catch(function(t){e.setState({error:t.response})})}).catch(function(t){e.setState({error:t.response})})}},{key:"error",value:function(){var e=this;p.a.error({title:"Verification failed",content:"We could not make this purchase, try again later!",onOk:function(){e.setState({purchasing:!1})}})}},{key:"render",value:function(){var e=this,t=E.a.TabPane,a=[];for(var l in this.state.controls)a.push({id:l,config:this.state.controls[l]});var n=a.map(function(t){return u.a.createElement(v.a,{elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,key:t.id,invalid:!t.config.valid,shouldValidate:t.config.validation,touched:t.config.touched,changed:function(a){return e.inputChangedHandler(a,t.id)},hint:t.config.hint,label:t.config.label})}),i=this.props.location.state.cart.map(function(e){return u.a.createElement("tr",{key:e.id},u.a.createElement("td",null,e.title),u.a.createElement("td",null,"$",e.price))}),s=u.a.createElement("div",{className:"form__Login"},u.a.createElement("h2",{className:" font-weight-bold  "},"Billing Details"),u.a.createElement("h5",null,"We do not sell your details or share them without your permission. Read more in our privacy policy"),u.a.createElement("hr",null),u.a.createElement("form",{onSubmit:function(t){return e.onBillingSubmit(t)}},u.a.createElement("div",{className:"row Custom_margin"},u.a.createElement("div",{className:"col"},u.a.createElement(v.a,{elementType:this.state.controls1.firstName.elementType,elementConfig:this.state.controls1.firstName.elementConfig,value:this.state.controls1.firstName.value,key:this.state.controls1.firstName.label,invalid:!this.state.controls1.firstName.valid,shouldValidate:this.state.controls1.firstName.validation,touched:this.state.controls1.firstName.touched,changed:function(t){return e.inputChangedHandler1(t,"firstName")},hint:this.state.controls1.firstName.hint,label:this.state.controls1.firstName.label})),u.a.createElement("div",{className:"col"},u.a.createElement(v.a,{elementType:this.state.controls1.lastName.elementType,elementConfig:this.state.controls1.lastName.elementConfig,value:this.state.controls1.lastName.value,key:this.state.controls1.lastName.label,invalid:!this.state.controls1.lastName.valid,shouldValidate:this.state.controls1.lastName.validation,touched:this.state.controls1.lastName.touched,changed:function(t){return e.inputChangedHandler1(t,"lastName")},hint:this.state.controls1.lastName.hint,label:this.state.controls1.lastName.label}))),n,u.a.createElement("div",{className:"row Custom_margin"},u.a.createElement("div",{className:"col"},u.a.createElement(v.a,{elementType:this.state.controls1.city.elementType,elementConfig:this.state.controls1.city.elementConfig,value:this.state.controls1.city.value,key:this.state.controls1.city.label,invalid:!this.state.controls1.city.valid,shouldValidate:this.state.controls1.city.validation,touched:this.state.controls1.city.touched,changed:function(t){return e.inputChangedHandler1(t,"city")},hint:this.state.controls1.city.hint,label:this.state.controls1.city.label})),u.a.createElement("div",{className:"col"},u.a.createElement(v.a,{elementType:this.state.controls1.state.elementType,elementConfig:this.state.controls1.state.elementConfig,value:this.state.controls1.state.value,key:this.state.controls1.state.label,invalid:!this.state.controls1.state.valid,shouldValidate:this.state.controls1.state.validation,touched:this.state.controls1.state.touched,changed:function(t){return e.inputChangedHandler1(t,"state")},hint:this.state.controls1.state.hint,label:this.state.controls1.state.label})),u.a.createElement("div",{className:"col"},u.a.createElement(v.a,{elementType:this.state.controls1.zipCode.elementType,elementConfig:this.state.controls1.zipCode.elementConfig,value:this.state.controls1.zipCode.value,key:this.state.controls1.zipCode.label,invalid:!this.state.controls1.zipCode.valid,shouldValidate:this.state.controls1.zipCode.validation,touched:this.state.controls1.zipCode.touched,changed:function(t){return e.inputChangedHandler1(t,"zipCode")},hint:this.state.controls1.zipCode.hint,label:this.state.controls1.zipCode.label}))),u.a.createElement("hr",null),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-md-8"}),u.a.createElement("div",{className:"col-md-4"},u.a.createElement(g.a,{btnType:"Btn-primary Btn-lg ml-4",disabled:!!this.state.loading},this.state.loading?"Saving...":"Save and Continue"))))),r=null;if(this.state.billingData&&!this.state.editable){s=u.a.createElement("div",{className:"border p-4 bg-light"},u.a.createElement("div",{className:"clearfix"},u.a.createElement("h2",{className:" font-weight-bold  float-left"},"Billing Details"),u.a.createElement(g.a,{btnType:"btn float-right btn-outline-secondary btn-lg",clicked:function(){return e.onUpdateBilling("billing")}},"edit")),u.a.createElement("div",{className:""},u.a.createElement("h4",null,this.state.billingData.full_name.toUpperCase()),u.a.createElement("h4",null,this.state.billingData.country.toUpperCase())));var o=u.a.createElement(S,{billingId:this.state.billingData.id});this.state.card&&!this.state.cardChange&&(o=u.a.createElement("div",{className:"border p-4 bg-light"},u.a.createElement("div",{className:"clearfix"},u.a.createElement("h2",{className:" font-weight-bold  float-left"},"Card Details"),u.a.createElement(g.a,{btnType:"btn float-right btn-outline-secondary btn-lg",clicked:function(){return e.onUpdateBilling("card")}},"edit")),u.a.createElement("div",{className:""},u.a.createElement("h4",null,this.state.card.brand),u.a.createElement("h4",null,this.state.card.country),u.a.createElement("h4",null,"************",this.state.card.last4)))),r=u.a.createElement(E.a,{onChange:this.callback,type:"card"},u.a.createElement(t,{tab:"Stripe",key:"1"},o),u.a.createElement(t,{tab:"To Checkout",key:"2"}),u.a.createElement(t,{tab:"Tab 3",key:"3"}))}return u.a.createElement("div",{className:"container"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-md-8"},s,u.a.createElement("br",null),u.a.createElement("div",{className:"border"},u.a.createElement("h2",{className:"pt-3 pl-3"},"Select Payment Method"),u.a.createElement("hr",null),r,u.a.createElement("div",{className:" form__Login no_shadow"},u.a.createElement("div",{className:"clearfix"},u.a.createElement("h2",{className:"float-left  btn-link"},"Your Order"),u.a.createElement("h3",{className:"float-right"},u.a.createElement("b",null,this.props.location.state.totalPrice))),u.a.createElement("hr",null),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-8"}),u.a.createElement("div",{className:"col-4 clearfix"},u.a.createElement("div",{className:"float-left"},u.a.createElement("h3",null,"Total:")),u.a.createElement("div",{className:"float-right"},u.a.createElement("b",null,"$",this.props.location.state.totalPrice)))),u.a.createElement("hr",null),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-8"}),u.a.createElement("div",{className:"col-4 clearfix"},u.a.createElement("div",{className:"float-right"},this.state.purchasing?u.a.createElement(g.a,{btnType:"Btn-primary btn-lg Btn-disable",clicked:this.orderhandler},"Verifying..."):u.a.createElement(g.a,{btnType:"Btn-primary btn-lg ",clicked:this.orderhandler},"Make Payment"))))))),u.a.createElement("div",{className:"col-md-4 "},u.a.createElement("div",{className:"table-responsive-md border"},u.a.createElement("table",{className:"table table-light"},u.a.createElement("thead",{className:"thead-light"},u.a.createElement("tr",null,u.a.createElement("th",{scope:"row"},"Order Summary"),u.a.createElement("th",null))),u.a.createElement("tbody",null,i),u.a.createElement("tfoot",null,u.a.createElement("tr",null,u.a.createElement("th",null,u.a.createElement("b",null,"Total")),u.a.createElement("th",null,u.a.createElement("b",null,"$",this.props.location.state.totalPrice)))))))))}}]),t}(d.Component);t.default=Object(b.a)(Object(y.b)(function(e){return{userId:e.authReducer.userId,token:e.authReducer.token}},function(e){return{onCheckToCart:function(t,a){return e(N.p(t,a))}}})(w))}}]);
//# sourceMappingURL=19.551fd3ed.chunk.js.map