{"version":3,"sources":["components/Drawer/Drawer.js","containers/Requests/Requests.js"],"names":["pStyle","fontSize","color","lineHeight","display","marginBottom","DescriptionItem","_ref","title","content","react_default","a","createElement","style","marginRight","DetailDrawer","state","record","loaded","accepted","declined","loading","error","acceptHandler","_this","setState","token","localStorage","getItem","data","status","setTimeout","axios","patch","concat","props","id","headers","Authorization","then","response","catch","declineHandler","onClose","this","drawer","es_drawer","width","placement","closable","visible","marginTop","row","col","span","Drawer_DescriptionItem","username","tooltip","moment","timestamp","format","days","budget","Button","btnType","clicked","download","divider","className","icon","type","theme","twoToneColor","Fragment","Spinner","React","Component","confirm","Modal","Request","requests","fetchRecords","user","occupation","get","params","developer","showDrawer","action","filter","x","downloadAttachmentHandler","console","log","deleteHandler","okText","okType","cancelText","onOk","delete","res","onCancel","_this2","columns","dataIndex","key","render","text","substring","length","cursor","onClick","PrimaryHeading","table","dataSource","Drawer"],"mappings":"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","file":"static/js/21.947aa567.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Drawer, Divider, Col, Row, Tooltip, Icon, Button } from \"antd\";\r\nimport axios from \"../../axios\";\r\nimport moment from \"moment\";\r\nimport CustomButton from \"../UI/Button/Button\";\r\nimport Spinner from \"../UI/Spinner/Spinner\";\r\n\r\nconst pStyle = {\r\n  fontSize: 16,\r\n  color: \"rgba(0,0,0,0.85)\",\r\n  lineHeight: \"24px\",\r\n  display: \"block\",\r\n  marginBottom: 16\r\n};\r\n\r\nconst DescriptionItem = ({ title, content }) => (\r\n  <div\r\n    style={{\r\n      fontSize: 14,\r\n      lineHeight: \"22px\",\r\n      marginBottom: 7,\r\n      color: \"rgba(0,0,0,0.65)\"\r\n    }}\r\n  >\r\n    <p\r\n      style={{\r\n        marginRight: 8,\r\n        display: \"inline-block\",\r\n        color: \"rgba(0,0,0,0.85)\"\r\n      }}\r\n    >\r\n      {title}:\r\n    </p>\r\n    {content}\r\n  </div>\r\n);\r\n\r\nclass DetailDrawer extends React.Component {\r\n  state = {\r\n    record: {},\r\n    loaded: false,\r\n    accepted: false,\r\n    declined: false,\r\n    loading: false,\r\n    error: null\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({ loaded: true });\r\n  }\r\n\r\n  acceptHandler = () => {\r\n    this.setState({ loading: true });\r\n    const token = localStorage.getItem(\"token\");\r\n    const data = {\r\n      status: \"accepted\"\r\n    };\r\n    setTimeout(() => {\r\n      axios\r\n        .patch(`/modification-requests/${this.props.record.id}/`, data, {\r\n          headers: {\r\n            Authorization: `Token ${token}`\r\n          }\r\n        })\r\n        .then(response => {\r\n          if (response.data.status === \"accepted\") {\r\n            this.setState({ accepted: true, loading: false });\r\n          }\r\n        })\r\n        .catch(error => this.setState({ error: error, loading: false }));\r\n    }, 1000);\r\n  };\r\n\r\n  declineHandler = () => {\r\n    this.setState({ loading: true });\r\n    const token = localStorage.getItem(\"token\");\r\n    const data = {\r\n      status: \"declined\"\r\n    };\r\n    setTimeout(() => {\r\n      axios\r\n        .patch(`/modification-requests/${this.props.record.id}/`, data, {\r\n          headers: {\r\n            Authorization: `Token ${token}`\r\n          }\r\n        })\r\n        .then(response => {\r\n          if (response.data.status === \"declined\") {\r\n            this.setState({ loading: false });\r\n            if (this.state.loading === false) {\r\n              this.props.onClose(\"declined\", response.data.id);\r\n            }\r\n          }\r\n        })\r\n        .catch(error => this.setState({ error: error, loading: false }));\r\n    }, 1000);\r\n  };\r\n\r\n  render() {\r\n    let drawer = null;\r\n\r\n    if (this.state.loaded) {\r\n      drawer = (\r\n        <Drawer\r\n          width={640}\r\n          placement=\"right\"\r\n          closable={false}\r\n          onClose={this.props.onClose}\r\n          visible={this.props.visible}\r\n        >\r\n          <div style={{ marginTop: \"9.4rem\" }} />\r\n          <p style={pStyle}>Request Detail</p>\r\n          <Row>\r\n            <Col span={12}>\r\n              <DescriptionItem\r\n                title=\"Sender\"\r\n                content={this.props.record.username}\r\n              />\r\n            </Col>\r\n            <Col span={12}>\r\n              <DescriptionItem\r\n                title=\"Date\"\r\n                content={\r\n                  <Tooltip\r\n                    title={moment(this.props.record.timestamp).format(\r\n                      \"HH:mm:ss\"\r\n                    )}\r\n                  >\r\n                    <span>\r\n                      {moment(this.props.record.timestamp).format(\"MM-DD-YYYY\")}\r\n                    </span>\r\n                  </Tooltip>\r\n                }\r\n              />\r\n            </Col>\r\n            <Col span={12}>\r\n              <DescriptionItem title=\"Days\" content={this.props.record.days} />\r\n            </Col>\r\n            <Col span={12}>\r\n              <DescriptionItem\r\n                title=\"Budget\"\r\n                content={\"$\" + this.props.record.budget}\r\n              />\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col span={24}>\r\n              <DescriptionItem\r\n                title=\"Description\"\r\n                content={this.props.record.content}\r\n              />\r\n            </Col>\r\n            <Col span={24}>\r\n              <DescriptionItem\r\n                title=\"Attachment\"\r\n                content={\r\n                  <CustomButton\r\n                    btnType=\" Btn-md btn-block bg-transparent text-primary mx-auto\"\r\n                    clicked={this.props.download}\r\n                  >\r\n                    download\r\n                  </CustomButton>\r\n                }\r\n              />\r\n            </Col>\r\n          </Row>\r\n          <Divider />\r\n          <p style={pStyle}>Response</p>\r\n          <Row className=\"text-center \">\r\n            {this.state.accepted || this.props.record.status === \"accepted\" ? (\r\n              <h2>\r\n                <Icon\r\n                  type=\"check-circle\"\r\n                  theme=\"twoTone\"\r\n                  twoToneColor=\"#05C0BA\"\r\n                />\r\n                &nbsp;&nbsp;Accepted\r\n              </h2>\r\n            ) : (\r\n              <>\r\n                {this.state.loading ? (\r\n                  <Spinner />\r\n                ) : (\r\n                  <>\r\n                    <Col span={11}>\r\n                      <CustomButton\r\n                        btnType=\"Btn-primary Btn-md btn-block mx-auto\"\r\n                        clicked={this.acceptHandler}\r\n                      >\r\n                        accept\r\n                      </CustomButton>\r\n                    </Col>\r\n                    <Col span={11}>\r\n                      <CustomButton\r\n                        btnType=\" Btn-md btn-block bg-transparent border text-danger mx-auto\"\r\n                        clicked={this.declineHandler}\r\n                      >\r\n                        decline\r\n                      </CustomButton>\r\n                    </Col>\r\n                  </>\r\n                )}\r\n              </>\r\n            )}\r\n          </Row>\r\n        </Drawer>\r\n      );\r\n    }\r\n\r\n    return <>{drawer}</>;\r\n  }\r\n}\r\n\r\nexport default DetailDrawer;\r\n","import React, { Component } from \"react\";\r\nimport { Table, Icon, Tooltip, Divider, Modal } from \"antd\";\r\nimport axios from \"../../axios\";\r\nimport PrimaryHeading from \"../../components/UI/Headings/PrimaryHeading\";\r\nimport Drawer from \"../../components/Drawer/Drawer\";\r\n\r\nconst confirm = Modal.confirm;\r\n\r\nclass Request extends Component {\r\n  state = {\r\n    requests: [],\r\n    record: {},\r\n    loading: false,\r\n    error: null,\r\n    accepted: false,\r\n    visible: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.fetchRecords();\r\n  }\r\n\r\n  fetchRecords = () => {\r\n    this.setState({ loading: true });\r\n    const user = localStorage.getItem(\"userId\");\r\n    const occupation = localStorage.getItem(\"occupation\");\r\n    const token = localStorage.getItem(\"token\");\r\n    setTimeout(() => {\r\n      if (occupation === \"buyer\") {\r\n        axios\r\n          .get(\"/modification-requests/\", {\r\n            params: {\r\n              user: user\r\n            },\r\n            headers: {\r\n              Authorization: `Token ${token}`\r\n            }\r\n          })\r\n          .then(response => {\r\n            this.setState({\r\n              requests: response.data,\r\n              loading: false,\r\n              error: null\r\n            });\r\n          })\r\n          .catch(error => this.setState({ error: error, loading: false }));\r\n      } else {\r\n        axios\r\n          .get(\"/modification-requests/\", {\r\n            params: {\r\n              developer: user\r\n            },\r\n            headers: {\r\n              Authorization: `Token ${token}`\r\n            }\r\n          })\r\n          .then(response => {\r\n            this.setState({\r\n              requests: response.data,\r\n              loading: false,\r\n              error: null\r\n            });\r\n          })\r\n          .catch(error => this.setState({ error: error, loading: false }));\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  showDrawer = record => {\r\n    this.setState({ visible: true, record: record });\r\n  };\r\n\r\n  onClose = (action, id) => {\r\n    this.setState({\r\n      visible: false\r\n    });\r\n\r\n    if (action === \"declined\") {\r\n      const requests = this.state.requests.filter(x => {\r\n        return x.id !== id;\r\n      });\r\n      this.setState({ requests: requests });\r\n    }\r\n  };\r\n\r\n  error() {\r\n    Modal.error({\r\n      title: \"Error\",\r\n      content: \"Something went wrong, please try again!\",\r\n\r\n      onOk: () => {}\r\n    });\r\n  }\r\n\r\n  downloadAttachmentHandler = () => {\r\n    const id = this.state.record.id;\r\n    const user = this.state.record.user;\r\n    axios\r\n      .get(`/modification-requests/attachment-download/${id}/?user=${user}`)\r\n      .then(response => {})\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  deleteHandler = id => {\r\n    confirm({\r\n      title: \"Are you sure to delete this?\",\r\n      content: \"This operation can not be undo\",\r\n      okText: \"Yes\",\r\n      okType: \"danger\",\r\n      cancelText: \"No\",\r\n      id: id,\r\n      onOk: () => {\r\n        const token = localStorage.getItem(\"token\");\r\n        axios\r\n          .delete(`/modification-requests/${id}/`, {\r\n            headers: {\r\n              Authorization: `Token ${token}`\r\n            }\r\n          })\r\n          .then(res => {\r\n            if (res.status === 204) {\r\n              const requests = this.state.requests.filter(x => {\r\n                return x.id !== id;\r\n              });\r\n              this.setState({ requests: requests, error: null });\r\n            }\r\n          })\r\n          .catch(error => this.setState({ error: error, loading: false }));\r\n      },\r\n      onCancel() {}\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const columns = [\r\n      {\r\n        title: \"Request\",\r\n        dataIndex: \"content\",\r\n        key: \"content\",\r\n        render: text => (\r\n          <span>\r\n            {text.substring(0, 90)}\r\n            {text.length > 90 ? \"...\" : null}{\" \"}\r\n          </span>\r\n        )\r\n      },\r\n      {\r\n        title: \"Action\",\r\n        key: \"action\",\r\n        render: (text, record) => (\r\n          <span>\r\n            {localStorage.getItem(\"occupation\") === \"buyer\" ? (\r\n              <>\r\n                <span className=\"text-primary\">{record.status}</span>\r\n                <Divider type=\"vertical\" />\r\n                <span\r\n                  className=\"text-danger\"\r\n                  style={{ cursor: \"pointer\" }}\r\n                  onClick={() => this.deleteHandler(record.id)}\r\n                >\r\n                  delete\r\n                </span>\r\n              </>\r\n            ) : (\r\n              <span\r\n                className=\"text-primary\"\r\n                style={{ cursor: \"pointer\" }}\r\n                onClick={() => this.showDrawer(record)}\r\n              >\r\n                View\r\n              </span>\r\n            )}\r\n          </span>\r\n        )\r\n      },\r\n      {\r\n        title: (\r\n          <Tooltip title=\"Reload\">\r\n            <Icon\r\n              type=\"reload\"\r\n              style={{ cursor: \"pointer\" }}\r\n              onClick={this.fetchRecords}\r\n            />\r\n          </Tooltip>\r\n        )\r\n      }\r\n    ];\r\n\r\n    return (\r\n      <div className=\"container bg-white border\">\r\n        {this.state.error ? this.error() : null}\r\n        <PrimaryHeading className=\"mt-2\">Requests</PrimaryHeading>\r\n        <Table\r\n          loading={this.state.loading}\r\n          columns={columns}\r\n          dataSource={this.state.requests}\r\n        />\r\n\r\n        <Drawer\r\n          visible={this.state.visible}\r\n          onClose={this.onClose}\r\n          record={this.state.record}\r\n          download={() => this.downloadAttachmentHandler()}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Request;\r\n"],"sourceRoot":""}