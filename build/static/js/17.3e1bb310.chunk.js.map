{"version":3,"sources":["containers/Library/Library.js"],"names":["Library","state","searchText","projects","getColumnSearchProps","dataIndex","filterDropdown","_ref","setSelectedKeys","selectedKeys","confirm","clearFilters","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","style","padding","antd__WEBPACK_IMPORTED_MODULE_6__","ref","node","_this","searchInput","placeholder","concat","value","onChange","e","target","onPressEnter","handleSearch","width","marginBottom","display","antd__WEBPACK_IMPORTED_MODULE_7__","type","onClick","icon","size","marginRight","handleReset","filterIcon","filtered","antd__WEBPACK_IMPORTED_MODULE_8__","color","undefined","onFilter","record","toString","toLowerCase","includes","onFilterDropdownVisibleChange","visible","setTimeout","select","render","text","react_highlight_words__WEBPACK_IMPORTED_MODULE_11___default","highlightStyle","backgroundColor","searchWords","autoEscape","textToHighlight","setState","downloadFileHandler","id","slug","axios","get","then","response","catch","error","console","log","_this2","this","user","localStorage","getItem","data","map","el","project","push","key","name","title","file","_this3","columns","className","cursor","_components_UI_Headings_PrimaryHeading__WEBPACK_IMPORTED_MODULE_12__","antd__WEBPACK_IMPORTED_MODULE_9__","dataSource","React","Component"],"mappings":"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","file":"static/js/17.3e1bb310.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Table, Input, Button, Icon } from \"antd\";\r\nimport axios from \"../../axios\";\r\nimport Highlighter from \"react-highlight-words\";\r\nimport PrimaryHeading from \"../../components/UI/Headings/PrimaryHeading\";\r\n\r\nclass Library extends React.Component {\r\n  state = {\r\n    searchText: \"\",\r\n    projects: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    const user = localStorage.getItem(\"userId\");\r\n    axios.get(`/order/?user=${user}`).then(response => {\r\n      let projects = [];\r\n      response.data.map(el =>\r\n        el.project.map(el =>\r\n          projects.push({\r\n            key: el.id,\r\n            name: el.title,\r\n            file: el.file[0].file,\r\n            id: el.file[0].id,\r\n            slug: el.file[0].slug\r\n          })\r\n        )\r\n      );\r\n\r\n      this.setState({ projects: projects });\r\n    });\r\n  }\r\n\r\n  getColumnSearchProps = dataIndex => ({\r\n    filterDropdown: ({\r\n      setSelectedKeys,\r\n      selectedKeys,\r\n      confirm,\r\n      clearFilters\r\n    }) => (\r\n      <div style={{ padding: 8 }}>\r\n        <Input\r\n          ref={node => {\r\n            this.searchInput = node;\r\n          }}\r\n          placeholder={`Search ${dataIndex}`}\r\n          value={selectedKeys[0]}\r\n          onChange={e =>\r\n            setSelectedKeys(e.target.value ? [e.target.value] : [])\r\n          }\r\n          onPressEnter={() => this.handleSearch(selectedKeys, confirm)}\r\n          style={{ width: 188, marginBottom: 8, display: \"block\" }}\r\n        />\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => this.handleSearch(selectedKeys, confirm)}\r\n          icon=\"search\"\r\n          size=\"small\"\r\n          style={{ width: 90, marginRight: 8 }}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button\r\n          onClick={() => this.handleReset(clearFilters)}\r\n          size=\"small\"\r\n          style={{ width: 90 }}\r\n        >\r\n          Reset\r\n        </Button>\r\n      </div>\r\n    ),\r\n    filterIcon: filtered => (\r\n      <Icon type=\"search\" style={{ color: filtered ? \"#1890ff\" : undefined }} />\r\n    ),\r\n    onFilter: (value, record) =>\r\n      record[dataIndex]\r\n        .toString()\r\n        .toLowerCase()\r\n        .includes(value.toLowerCase()),\r\n    onFilterDropdownVisibleChange: visible => {\r\n      if (visible) {\r\n        setTimeout(() => this.searchInput.select());\r\n      }\r\n    },\r\n    render: text => (\r\n      <Highlighter\r\n        highlightStyle={{ backgroundColor: \"#ffc069\", padding: 0 }}\r\n        searchWords={[this.state.searchText]}\r\n        autoEscape\r\n        textToHighlight={text.toString()}\r\n      />\r\n    )\r\n  });\r\n\r\n  handleSearch = (selectedKeys, confirm) => {\r\n    confirm();\r\n    this.setState({ searchText: selectedKeys[0] });\r\n  };\r\n\r\n  handleReset = clearFilters => {\r\n    clearFilters();\r\n    this.setState({ searchText: \"\" });\r\n  };\r\n\r\n  downloadFileHandler = record => {\r\n    const id = record.id;\r\n    const slug = record.slug;\r\n    axios\r\n      .get(`/project-download/${id}/?slug=${slug}`)\r\n      .then(response => {})\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const columns = [\r\n      {\r\n        title: \"Project\",\r\n        dataIndex: \"name\",\r\n        key: \"name\",\r\n        render: text => <span>{text}</span>\r\n      },\r\n      {\r\n        title: \"File\",\r\n        key: \"file\",\r\n        render: (text, record) => (\r\n          <span\r\n            className=\"text-primary\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={() => this.downloadFileHandler(record)}\r\n          >\r\n            Download\r\n          </span>\r\n        )\r\n      }\r\n    ];\r\n\r\n    return (\r\n      <div className=\"container bg-white border\">\r\n        <PrimaryHeading className=\"mt-2\">Library</PrimaryHeading>\r\n        <Table columns={columns} dataSource={this.state.projects} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Library;\r\n"],"sourceRoot":""}